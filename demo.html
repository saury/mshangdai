<!doctype html>
<html lang="en">

<head>
    <meta content="yes" name="apple-mobile-web-app-capable" />
    <meta content="yes" name="apple-touch-fullscreen" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta charset="UTF-8">
    <title>demo</title>
    <link rel="stylesheet" href="css/pure-min.css">
    <link rel="stylesheet" href="css/doughnut.css" media="screen" type="text/css" />
</head>

<body>
    <div id="doughnutChart" class="chart"></div>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <div class="bar-main">
        <span class="bar-parameter">7.0</span>
        <div class="bar-wrap">
            <span class="bar mint" data-percent="8"></span>
        </div>
        <span>8.0</span>
    </div>
    <div class="bar-main">
        <span class="bar-parameter">1.5</span>
        <div class="bar-wrap">
            <span class="bar mint" data-percent="2.5"></span>
        </div>
        <span>2.5</span>
    </div>
    <div class="bar-main">
        <span class="bar-parameter">2.0</span>
        <div class="bar-wrap">
            <span class="bar mint" data-percent="2.5"></span>
        </div>
        <span>2.5</span>
    </div>
    <script src='js/zepto.min.js'></script>
    <script src="js/doughnut.js"></script>
    <script>
    $(function() {
        /*doughnut*/
        $("#doughnutChart").drawDoughnutChart([{
            title: "percentage",
            value: parseFloat($(".bar-parameter").eq(0).html()) + parseFloat($(".bar-parameter").eq(1).html()) + parseFloat($(".bar-parameter").eq(2).html()),
            color: "yellow"
        }]);
        /*bar width*/
        $(".bar-main").each(function() {
            $(this).children().children(".bar").addClass("active");
            var numerator = $(this).children(".bar-parameter").html();
            //console.log(numerator);
            var percentage = (numerator / $(this).children().children(".bar").attr("data-percent") * 100).toFixed(1) + "%";
            //console.log(percentage);
            $(this).children().children(".bar").css("width", percentage);
        });
    });

    /*bar parameter*/
    var t = 20,
        Num = [0, 0, 0],
        maxDom = [$(".bar-parameter").eq(0), $(".bar-parameter").eq(1), $(".bar-parameter").eq(2)],
        max = [$(".bar-parameter").eq(0).html(), $(".bar-parameter").eq(1).html(), $(".bar-parameter").eq(2).html()];
    window.onload = function() {
        t = [setInterval("Refresh1(" + 0 + ");", t), setInterval("Refresh1(" + 1 + ");", t), setInterval("Refresh1(" + 2 + ");", t)]
    };

    function Refresh1(i) {
        Num[i] += 0.1;
        maxDom[i].html(Num[i].toFixed(1));
        var num2 = Num[i].toFixed(1);
        if (num2 == max[i]) {
            //console.log("123");
            clearInterval(t[i]);
        };
    }
    </script>
    </div>
</body>

</html>
